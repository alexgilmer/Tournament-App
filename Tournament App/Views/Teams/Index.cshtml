@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@model Tournament_App.Models.ViewModels.Teams.IndexViewModel

<h1>Welcome to the Teams Index page</h1>

<div class="accordion">
    @for(int i = 0; i < Model.Groups.Count; i++)
    {
        <div class="accordion-item">
            <h2 class="accordion-header" id="team-@i">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#team-collapsible-@i" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                    @Model.Groups[i].Name: &nbsp;<strong>@Model.Groups[i].Points Points</strong>
                </button>
            </h2>
            <div id="team-collapsible-@i" class="accordion-collapse collapse show" aria-labelledby="team-@i">
                <div class="accordion-body">
                    @foreach(var member in Model.Groups[i].Members)
                    {
                        @if(User.IsInRole(Constants.AdminRole))
                        {
                            <a asp-controller="Admin" asp-action="EditUser" asp-route-userId="@member.ApplicationUserId">
                                <span class="badge bg-info text-dark">@member.Name</span>
                            </a>
                        }
                        else
                        {
                            <span class="badge bg-info text-dark">@member.Name</span>
                        }
                    }
                </div>
            </div>
        </div>
    }
</div>